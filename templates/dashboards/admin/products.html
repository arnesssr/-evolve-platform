<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management - Evolve Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #17a2b8;
            --sidebar-width: 250px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(135deg, var(--primary-color) 0%, #34495e 100%);
            color: white;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 1.5rem 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }

        .sidebar-nav {
            padding: 1rem 0;
        }

        .nav-item {
            margin-bottom: 0.25rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: white;
            background-color: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .nav-link i {
            margin-right: 0.75rem;
            width: 20px;
            text-align: center;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            padding: 0;
        }

        .topbar {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stats-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid;
            transition: transform 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-3px);
        }

        .stats-card.primary { border-left-color: var(--primary-color); }
        .stats-card.success { border-left-color: var(--success-color); }
        .stats-card.warning { border-left-color: var(--warning-color); }
        .stats-card.info { border-left-color: var(--info-color); }
        .stats-card.danger { border-left-color: var(--danger-color); }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .product-image {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .product-image i {
            font-size: 3rem;
            color: white;
            opacity: 0.8;
        }

        .product-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .product-status.active {
            background: rgba(40, 167, 69, 0.9);
            color: white;
        }

        .product-status.inactive {
            background: rgba(220, 53, 69, 0.9);
            color: white;
        }

        .product-status.draft {
            background: rgba(108, 117, 125, 0.9);
            color: white;
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .product-category {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 1rem;
        }

        .product-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .product-stat {
            text-align: center;
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .product-stat-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .product-stat-label {
            font-size: 0.8rem;
            color: #6c757d;
        }

        .product-actions {
            display: flex;
            gap: 0.5rem;
            padding-top: 1rem;
            border-top: 1px solid #dee2e6;
        }

        .filters-section {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .view-toggle {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            display: none;
        }

        .table-container.active {
            display: block;
        }

        .table-header {
            padding: 1.5rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .product-thumbnail {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .notification-badge {
            background: var(--danger-color);
            color: white;
            border-radius: 50%;
            padding: 0.25rem 0.5rem;
            font-size: 0.7rem;
            min-width: 1.5rem;
            text-align: center;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding-left: 2.5rem;
        }

        .search-box .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="sidebar-brand">
                <i class="fas fa-rocket me-2"></i>Evolve Admin
            </a>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>Dashboard
                </a>
            </div>
            <div class="nav-item">
                <a href="users.html" class="nav-link">
                    <i class="fas fa-users"></i>Users
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link active">
                    <i class="fas fa-box"></i>Products
                </a>
            </div>
            <div class="nav-item">
                <a href="commissions.html" class="nav-link">
                    <i class="fas fa-percentage"></i>Commissions
                </a>
            </div>
            <div class="nav-item">
                <a href="reports.html" class="nav-link">
                    <i class="fas fa-chart-line"></i>Reports & Analytics
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-money-bill-wave"></i>Payouts
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-tags"></i>Promotions
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-bullhorn"></i>Announcements
                </a>
            </div>
            <div class="nav-item">
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>Settings
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="topbar">
            <div class="d-flex align-items-center">
                <button class="btn btn-link d-md-none me-3" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h4 class="mb-0">Product Management</h4>
            </div>
            <div class="d-flex align-items-center gap-3">
                <div class="dropdown">
                    <button class="btn btn-link position-relative" type="button" data-bs-toggle="dropdown">
                        <i class="fas fa-bell fa-lg"></i>
                        <span class="notification-badge">2</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><h6 class="dropdown-header">Notifications</h6></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-box me-2 text-success"></i>New product added</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Low inventory alert</a></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="btn btn-link d-flex align-items-center" type="button" data-bs-toggle="dropdown">
                        <div class="user-avatar me-2">JD</div>
                        <span>John Doe</span>
                        <i class="fas fa-chevron-down ms-2"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Page Content -->
        <div class="container-fluid p-4">
            <!-- Statistics Cards -->
            <div class="stats-cards">
                <div class="stats-card primary">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="h3 mb-1">47</div>
                            <div class="text-muted">Total Products</div>
                        </div>
                        <i class="fas fa-box fa-2x text-primary opacity-25"></i>
                    </div>
                </div>
                <div class="stats-card success">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="h3 mb-1">42</div>
                            <div class="text-muted">Active Products</div>
                        </div>
                        <i class="fas fa-check-circle fa-2x text-success opacity-25"></i>
                    </div>
                </div>
                <div class="stats-card warning">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="h3 mb-1">3</div>
                            <div class="text-muted">Low Stock</div>
                        </div>
                        <i class="fas fa-exclamation-triangle fa-2x text-warning opacity-25"></i>
                    </div>
                </div>
                <div class="stats-card info">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="h3 mb-1">$125,450</div>
                            <div class="text-muted">Total Revenue</div>
                        </div>
                        <i class="fas fa-dollar-sign fa-2x text-info opacity-25"></i>
                    </div>
                </div>
                <div class="stats-card danger">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="h3 mb-1">2</div>
                            <div class="text-muted">Out of Stock</div>
                        </div>
                        <i class="fas fa-times-circle fa-2x text-danger opacity-25"></i>
                    </div>
                </div>
            </div>

            <!-- Filters Section -->
            <div class="filters-section">
                <div class="row g-3">
                    <div class="col-md-3">
                        <div class="search-box">
                            <input type="text" class="form-control" id="searchInput" placeholder="Search products...">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="categoryFilter">
                            <option value="">All Categories</option>
                            <option value="software">Software</option>
                            <option value="service">Services</option>
                            <option value="subscription">Subscriptions</option>
                            <option value="digital">Digital Products</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="statusFilter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="draft">Draft</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="priceFilter">
                            <option value="">All Prices</option>
                            <option value="0-50">$0 - $50</option>
                            <option value="50-100">$50 - $100</option>
                            <option value="100-500">$100 - $500</option>
                            <option value="500+">$500+</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-outline-secondary w-100" onclick="clearFilters()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-success w-100" onclick="showQuickCreateModal('product')">
                            <i class="fas fa-plus me-1"></i>Add Product
                        </button>
                    </div>
                </div>
            </div>

            <!-- View Toggle -->
            <div class="view-toggle">
                <div class="d-flex align-items-center">
                    <h5 class="mb-0 me-3">Products</h5>
                    <span class="badge bg-secondary">47 products</span>
                </div>
                <div class="d-flex gap-2">
                    <div class="btn-group" role="group">
                        <input type="radio" class="btn-check" name="viewOptions" id="gridView" checked onchange="switchView('grid')">
                        <label class="btn btn-outline-primary" for="gridView">
                            <i class="fas fa-th-large"></i> Grid
                        </label>
                        <input type="radio" class="btn-check" name="viewOptions" id="tableView" onchange="switchView('table')">
                        <label class="btn btn-outline-primary" for="tableView">
                            <i class="fas fa-list"></i> Table
                        </label>
                    </div>
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-cog me-1"></i>Actions
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="showModal('bulkActionModal')"><i class="fas fa-tasks me-2"></i>Bulk Actions</a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportProducts()"><i class="fas fa-download me-2"></i>Export Products</a></li>
                            <li><a class="dropdown-item" href="#" onclick="showImportModal()"><i class="fas fa-upload me-2"></i>Import Products</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="showModal('generateReportModal')"><i class="fas fa-chart-bar me-2"></i>Generate Report</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Product Grid View -->
            <div class="product-grid" id="productGrid">
                <!-- Products will be populated by JavaScript -->
            </div>

            <!-- Product Table View -->
            <div class="table-container" id="productTable">
                <div class="table-header">
                    <div class="d-flex align-items-center">
                        <h5 class="mb-0">Products List</h5>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover" id="productsDataTable">
                        <thead>
                            <tr>
                                <th width="50">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="selectAll">
                                    </div>
                                </th>
                                <th>Product</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Commission</th>
                                <th>Status</th>
                                <th>Sales</th>
                                <th>Created</th>
                                <th width="120">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script>
        // Sample product data
        const products = [
            {
                id: 1,
                name: "Professional Plan",
                category: "subscription",
                price: 99.00,
                commission: 15,
                status: "active",
                sales: 342,
                revenue: 33858,
                created: "2024-01-15",
                description: "Advanced features for growing businesses",
                featured: true
            },
            {
                id: 2,
                name: "Basic Plan",
                category: "subscription", 
                price: 29.00,
                commission: 10,
                status: "active",
                sales: 156,
                revenue: 4524,
                created: "2024-01-20",
                description: "Essential features for small teams",
                featured: false
            },
            {
                id: 3,
                name: "Enterprise Suite",
                category: "software",
                price: 299.00,
                commission: 20,
                status: "active",
                sales: 78,
                revenue: 23322,
                created: "2024-02-01",
                description: "Complete solution for large organizations",
                featured: true
            },
            {
                id: 4,
                name: "Consulting Service",
                category: "service",
                price: 150.00,
                commission: 25,
                status: "active",
                sales: 45,
                revenue: 6750,
                created: "2024-02-10",
                description: "Expert consultation and guidance",
                featured: false
            },
            {
                id: 5,
                name: "Digital Toolkit",
                category: "digital",
                price: 49.00,
                commission: 30,
                status: "inactive",
                sales: 23,
                revenue: 1127,
                created: "2024-02-20",
                description: "Collection of digital resources and templates",
                featured: false
            },
            {
                id: 6,
                name: "Premium Analytics",
                category: "software",
                price: 199.00,
                commission: 18,
                status: "active",
                sales: 67,
                revenue: 13333,
                created: "2024-03-01",
                description: "Advanced analytics and reporting tools",
                featured: true
            }
        ];

        let currentView = 'grid';
        let filteredProducts = [...products];
        let table;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            renderProducts();
            initializeDataTable();
        });

        function setupEventListeners() {
            // Sidebar toggle
            document.getElementById('sidebarToggle')?.addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('active');
            });

            // Search functionality
            document.getElementById('searchInput').addEventListener('input', applyFilters);

            // Filter functionality
            ['categoryFilter', 'statusFilter', 'priceFilter'].forEach(filterId => {
                document.getElementById(filterId).addEventListener('change', applyFilters);
            });
        }

        function switchView(view) {
            currentView = view;
            const gridView = document.getElementById('productGrid');
            const tableView = document.getElementById('productTable');
            
            if (view === 'grid') {
                gridView.style.display = 'grid';
                tableView.classList.remove('active');
            } else {
                gridView.style.display = 'none';
                tableView.classList.add('active');
                if (!table) {
                    initializeDataTable();
                }
            }
        }

        function renderProducts() {
            if (currentView === 'grid') {
                renderProductGrid();
            } else {
                renderProductTable();
            }
        }

        function renderProductGrid() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <div class="product-image">
                        <i class="fas ${getProductIcon(product.category)}"></i>
                        <span class="product-status ${product.status}">${product.status.charAt(0).toUpperCase() + product.status.slice(1)}</span>
                    </div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-category">
                            <i class="fas ${getCategoryIcon(product.category)} me-1"></i>
                            ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}
                        </div>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="product-stats">
                            <div class="product-stat">
                                <div class="product-stat-value">${product.sales}</div>
                                <div class="product-stat-label">Sales</div>
                            </div>
                            <div class="product-stat">
                                <div class="product-stat-value">${product.commission}%</div>
                                <div class="product-stat-label">Commission</div>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-sm btn-outline-primary flex-fill" onclick="viewProduct(${product.id})">
                                <i class="fas fa-eye me-1"></i>View
                            </button>
                            <button class="btn btn-sm btn-outline-success flex-fill" onclick="editProduct(${product.id})">
                                <i class="fas fa-edit me-1"></i>Edit
                            </button>
                            <div class="dropdown flex-fill">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle w-100" data-bs-toggle="dropdown">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="duplicateProduct(${product.id})"><i class="fas fa-copy me-2"></i>Duplicate</a></li>
                                    <li><a class="dropdown-item ${product.status === 'active' ? 'text-warning' : 'text-success'}" href="#" onclick="toggleStatus(${product.id})">${product.status === 'active' ? '<i class="fas fa-pause me-2"></i>Deactivate' : '<i class="fas fa-play me-2"></i>Activate'}</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="#" onclick="deleteProduct(${product.id})"><i class="fas fa-trash me-2"></i>Delete</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderProductTable() {
            const tbody = document.getElementById('productsTableBody');
            tbody.innerHTML = filteredProducts.map(product => `
                <tr>
                    <td>
                        <div class="form-check">
                            <input class="form-check-input product-checkbox" type="checkbox" value="${product.id}">
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="product-thumbnail me-3">
                                <i class="fas ${getProductIcon(product.category)}"></i>
                            </div>
                            <div>
                                <div class="fw-bold">${product.name}</div>
                                <div class="text-muted small">${product.description}</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="badge bg-light text-dark">
                            <i class="fas ${getCategoryIcon(product.category)} me-1"></i>
                            ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}
                        </span>
                    </td>
                    <td class="fw-bold">$${product.price.toFixed(2)}</td>
                    <td>${product.commission}%</td>
                    <td>
                        <span class="badge bg-${product.status === 'active' ? 'success' : 'danger'}">
                            ${product.status.charAt(0).toUpperCase() + product.status.slice(1)}
                        </span>
                    </td>
                    <td>
                        <div class="fw-bold">${product.sales}</div>
                        <div class="text-muted small">$${product.revenue.toLocaleString()}</div>
                    </td>
                    <td>${formatDate(product.created)}</td>
                    <td>
                        <div class="d-flex gap-1">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewProduct(${product.id})" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" onclick="editProduct(${product.id})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" title="More">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="duplicateProduct(${product.id})"><i class="fas fa-copy me-2"></i>Duplicate</a></li>
                                    <li><a class="dropdown-item text-danger" href="#" onclick="deleteProduct(${product.id})"><i class="fas fa-trash me-2"></i>Delete</a></li>
                                </ul>
                            </div>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function initializeDataTable() {
            if (table) {
                table.destroy();
            }
            
            table = $('#productsDataTable').DataTable({
                searching: false,
                paging: true,
                info: true,
                lengthChange: true,
                pageLength: 25,
                order: [[1, 'asc']],
                columnDefs: [
                    { orderable: false, targets: [0, 8] }
                ]
            });
        }

        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const status = document.getElementById('statusFilter').value;
            const priceRange = document.getElementById('priceFilter').value;

            filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(search) || 
                                    product.description.toLowerCase().includes(search);
                const matchesCategory = !category || product.category === category;
                const matchesStatus = !status || product.status === status;
                
                let matchesPrice = true;
                if (priceRange) {
                    const price = product.price;
                    switch(priceRange) {
                        case '0-50':
                            matchesPrice = price <= 50;
                            break;
                        case '50-100':
                            matchesPrice = price > 50 && price <= 100;
                            break;
                        case '100-500':
                            matchesPrice = price > 100 && price <= 500;
                            break;
                        case '500+':
                            matchesPrice = price > 500;
                            break;
                    }
                }

                return matchesSearch && matchesCategory && matchesStatus && matchesPrice;
            });

            renderProducts();
        }

        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('priceFilter').value = '';
            filteredProducts = [...products];
            renderProducts();
        }

        function getProductIcon(category) {
            const icons = {
                software: 'fa-laptop-code',
                service: 'fa-handshake',
                subscription: 'fa-calendar-alt',
                digital: 'fa-download'
            };
            return icons[category] || 'fa-box';
        }

        function getCategoryIcon(category) {
            const icons = {
                software: 'fa-laptop-code',
                service: 'fa-handshake',
                subscription: 'fa-calendar-alt',
                digital: 'fa-download'
            };
            return icons[category] || 'fa-tag';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Product action functions
        function viewProduct(productId) {
            console.log('View product:', productId);
            // Show product details modal
        }

        function editProduct(productId) {
            console.log('Edit product:', productId);
            // Show quick create modal in edit mode
        }

        function duplicateProduct(productId) {
            if (confirm('Duplicate this product?')) {
                console.log('Duplicate product:', productId);
                // Implement product duplication
            }
        }

        function toggleStatus(productId) {
            const product = products.find(p => p.id === productId);
            const newStatus = product.status === 'active' ? 'inactive' : 'active';
            
            if (confirm(`${newStatus === 'active' ? 'Activate' : 'Deactivate'} this product?`)) {
                product.status = newStatus;
                renderProducts();
                console.log('Toggle status for product:', productId, 'to', newStatus);
            }
        }

        function deleteProduct(productId) {
            if (confirm('Delete this product? This action cannot be undone.')) {
                console.log('Delete product:', productId);
                // Implement product deletion
            }
        }

        function exportProducts() {
            console.log('Export products');
            // Implement product export
        }

        function showImportModal() {
            console.log('Show import modal');
            // Show import modal
        }

        // Modal helper functions
        function showModal(modalId) {
            console.log('Show modal:', modalId);
        }

        function showQuickCreateModal(type) {
            console.log('Show quick create modal for:', type);
        }
    </script>
</body>
</html>
